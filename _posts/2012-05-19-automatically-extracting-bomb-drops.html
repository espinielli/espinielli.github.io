---
layout: post
title: Automatically extracting bomb drops from the Blitz Bomb Census maps
date: '2012-05-19T12:36:00.001+02:00'
author: enrico_spinielli
comments: true
tags:
- data visualization
- blitz
- python
- omputer vision
modified_time: '2012-05-22T13:38:25.682+02:00'
thumbnail: http://1.bp.blogspot.com/-TCP_DXTqInE/T7d2mtikd7I/AAAAAAAAAuA/lEMv3-q6Ez0/s72-c/the_blitz.png
blogger_id: tag:blogger.com,1999:blog-1947405997418753543.post-521503363907081249
blogger_orig_url: http://ongiantsshoulders.blogspot.com/2012/05/automatically-extracting-bomb-drops.html
---

I just finished <a href="http://en.wikipedia.org/wiki/Blackout/All_Clear">Blackout by Connie Willis</a>&nbsp;and I was wondering where she did get all the exact times when the air raids of The Blitz were happening.<br />I am curious because I was thinking that a timeline map would give a visual effect of the huge destruction and hard times the Londoners had to go through...so I googled for it and found the following:<br /><ul><li>a nice <a href="http://blitzbombcensusmaps.wordpress.com/">research blog</a>&nbsp;which uses the <a href="http://www.nationalarchives.gov.uk/records/research-guides/maps-bomb-census-survey.htm">Blitz Bomb Census</a> from <a href="http://www.nationalarchives.gov.uk/">The National Archives</a></li><li>a <a href="http://www.guardian.co.uk/news/datablog/2010/sep/06/london-blitz-bomb-map-september-7-1940">blog entry</a> from the Guardian about the first day - and data - of the Blitz over London.<br />&nbsp;Here the source of info is the <a href="http://www.cityoflondon.gov.uk/Corporation/LGNL_Services/Leisure_and_culture/Records_and_archives/">London Metropolitan Archives</a></li></ul>Both examples show nice data visualization opportunities, but they both show how difficult it is to obtain data. Digital access to historical data could triggers a blossoming of applications!<br /><br />Anyway I experimented with the little <a href="http://blitzbombcensusmaps.files.wordpress.com/2012/04/example-of-the-aggregate-maps.jpg">map</a>&nbsp;from the first blog and wrote a little program using <a href="http://simplecv.org/">SimpleCV</a>.<br /><br />This is were I started from:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-TCP_DXTqInE/T7d2mtikd7I/AAAAAAAAAuA/lEMv3-q6Ez0/s1600/the_blitz.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="175" src="http://1.bp.blogspot.com/-TCP_DXTqInE/T7d2mtikd7I/AAAAAAAAAuA/lEMv3-q6Ez0/s320/the_blitz.png" width="320" /></a></div>and this is what I got (without too much work, I must admit):<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-Ah6GjORTdBU/T7d261ibIcI/AAAAAAAAAuI/giWlVstQcp0/s1600/the_blitz_highlighted_bombs.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="175" src="http://4.bp.blogspot.com/-Ah6GjORTdBU/T7d261ibIcI/AAAAAAAAAuI/giWlVstQcp0/s320/the_blitz_highlighted_bombs.png" width="320" /></a></div><br />The code is quite simple and the parameters could be changed to get higher accuracy.<br /><br /><pre class="brush:python">blz = Image("./sampleimages/the_blitz.png")<br />img = blz.copy()<br />dist = img.colorDistance(SimpleCV.Color.WHITE)<br />dist.dilate(2)<br /><br />segmented = dist.stretch(240, 255)<br />blobs = segmented.findBlobs()<br />if blobs:<br /> circles = blobs.filter([b.isCircle(0.6) for b in blobs])<br /> for c in circles:<br />  img.drawCircle((c.x, c.y),<br />                 c.radius(),<br />                 SimpleCV.Color.YELLOW,<br />                 2)<br /> img.show()<br /><br /></pre><link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css"></link><link href="http://alexgorbatchev.com/pub/sh/current/styles/shCoreDefault.css" rel="stylesheet" type="text/css"></link><link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeMidnight.css" rel="stylesheet" type="text/css"></link>   <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shAutoloader.js" type="text/javascript"></script>   <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCSharp.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushSql.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCss.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushPython.js" type="text/javascript"></script>   <script language="javascript" type="text/javascript">    SyntaxHighlighter.config.bloggerMode = true;     SyntaxHighlighter.all(); </script>
